codeigniter-event-manager
=========================

<strong>CodeIgniter Event Manager</strong>


<html><head><title>CodeIgniter Event MAnager</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}.c0{widows:2;orphans:2;height:11pt;direction:ltr}.c24{line-height:1.15;padding-top:0pt;text-align:left;padding-bottom:0pt}.c7{widows:2;orphans:2;direction:ltr}.c18{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c6{color:#808030;background-color:#ffffe8}.c8{color:#0000e6;background-color:#ffffe8}.c3{color:#5f5035;background-color:#ffffe8}.c5{color:#800000;background-color:#ffffe8}.c19{padding-top:10pt;page-break-after:avoid}.c10{line-height:1.6000000238418564;page-break-after:avoid}.c1{color:#800080;background-color:#ffffe8}.c9{font-style:italic;background-color:#ffffe8}.c12{color:#0000ff;font-style:italic}.c23{font-size:12pt}.c2{color:#333333}.c11{background-color:#ffffe8}.c13{color:#797997}.c14{font-style:italic}.c22{padding-bottom:12pt}.c17{color:#400000}.c20{text-decoration:underline}.c15{line-height:1.6000000238418564}.c21{page-break-after:avoid}.c16{text-indent:36pt}.c4{font-weight:bold}.title{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}.subtitle{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt;page-break-after:avoid}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h2{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h3{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h4{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h5{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h6{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}</style></head><body class="c18"><p class="c7 c10 c22 title"><a name="h.ij7hs9eswngj"></a><span>CodeIgniter Event Manager</span></p><p class="c7 c15"><span class="c2">CI Version: 2 &amp; 2.2.0 </span></p><p class="c0 c15"><span class="c2"></span></p><p class="c7 c15"><span class="c2">Laravel MVC Framework&#39;ten esinlenerek yaz&#305;lm&#305;&#351;t&#305;r. </span></p><p class="c0 c15"><span class="c2 c23"></span></p><h1 class="c7 c10"><a name="h.tliiurw2k8hi"></a><span class="c4">Projeyi klonlad&#305;ktan sonra yapman&#305;z gereken:</span><span>&nbsp;</span></h1><p class="c7 c15"><span class="c2">1. events klas&ouml;r&uuml;n&uuml; </span><span class="c2 c4">application</span><span class="c2">&nbsp;&gt; </span><span class="c2 c4">libraries</span><span class="c2">&nbsp;klas&ouml;r&uuml;ne ekleyin </span></p><p class="c7 c15"><span class="c2">2. K&uuml;t&uuml;phaneyi projeniziniz </span><span class="c2 c4">config </span><span class="c2">&gt; </span><span class="c2 c4">autoload </span><span class="c2">dosyas&#305; i&ccedil;indeki</span><span class="c2 c4">&nbsp;</span><span class="c11 c13">$autoload</span><span class="c6">[</span><span class="c8">&quot;libraries&quot;</span><span class="c6">]</span><span class="c2 c4">&nbsp;</span><span class="c2">dizisine ekleyin.</span></p><p class="c7 c15"><span class="c2">(</span><span class="c2 c4">&ouml;rn:</span><span class="c2">&nbsp;</span><span class="c11 c13">$autoload</span><span class="c6">[</span><span class="c8">&quot;libraries&quot;</span><span class="c6">]</span><span class="c2 c11">&nbsp;</span><span class="c6">=</span><span class="c2 c11">&nbsp;</span><span class="c5 c4">array</span><span class="c6">(</span><span class="c8">&quot;events/events&quot;</span><span class="c6">);</span><span class="c2">&nbsp;)</span></p><p class="c0 c15"><span class="c2"></span></p><h1 class="c7 c10"><a name="h.33shfi6cepvb"></a><span>Event&rsquo;lerin tan&#305;mlanabilece&#287;i alanlar:</span></h1><p class="c7"><span>Event&rsquo;lerinizi proje i&ccedil;inde controller, model, helper yada kod mant&#305;&#287;&#305;n&#305;za uygun </span><span class="c4">CI</span><span>&nbsp;&ccedil;at&#305;s&#305; d&#305;&#351;&#305;na &ccedil;&#305;k&#305;lmad&#305;&#287;&#305; s&uuml;rece her hangi bir yerde tan&#305;mlayabilirsiniz.</span></p><p class="c0"><span></span></p><p class="c7"><span>Bunun d&#305;&#351;&#305;nda </span><span class="c4">application/libraries/events</span><span>&nbsp;klas&ouml;r&uuml; i&ccedil;indeki </span><span class="c4">defined.php </span><span>dosyas&#305; i&ccedil;inde de tan&#305;mlayabilirsiniz.</span></p><p class="c0"><span></span></p><p class="c7"><span class="c4">defined.php</span><span>&nbsp;dosyas&#305; i&ccedil;indeki tan&#305;mlanan event&rsquo;ler projede her alanda kullan&#305;labilir.</span></p><p class="c0"><span></span></p><p class="c7"><span>Unutulmamas&#305; gereken &ouml;nemli bir husus, </span><span class="c4">defined.php</span><span>&nbsp;d&#305;&#351;&#305;nda her hangi bir yerde tan&#305;mlanan event&rsquo;ler &ccedil;al&#305;&#351;t&#305;r&#305;lmak istendi&#287;inde &nbsp;</span><span class="c4">run-time</span><span>&nbsp;durumunda ayn&#305; ortamda tan&#305;mlanm&#305;&#351; olmas&#305; gerekir.</span></p><p class="c0"><span></span></p><p class="c7"><span>Bu handikap&#305; a&#351;mak i&ccedil;in event&rsquo;lerinizi </span><span class="c4">defined.php</span><span>&nbsp;tan&#305;mlaman&#305;z &ouml;nerilir.</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c7 c21 title"><a name="h.s2x9dd2h228u"></a><span>Yeni bir event tan&#305;mlanmas&#305; ve &ccedil;al&#305;&#351;t&#305;r&#305;lmas&#305;</span></p><p class="c0"><span></span></p><p class="c7"><span>Yeni bir event tan&#305;mlamak i&ccedil;in &ouml;ncelikle event&rsquo;e bir anahtar key belirlememiz gerekiyor.</span></p><p class="c0"><span></span></p><p class="c7"><span>Events k&uuml;t&uuml;phanemizin projede autoload alan&#305;nda otomatik olarak y&uuml;klendi&#287;ini varsay&#305;yorum.</span></p><p class="c7"><span class="c11">Events</span><span class="c1">::</span><span class="c11 c17">add</span><span class="c6">(</span><span class="c8">&#39;event.manager&#39;</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c5 c4">function</span><span class="c6">(</span><span class="c11 c13">$ci_instance</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c11 c13">$parm</span><span class="c6">)</span><span class="c1">{</span></p><p class="c7 c16"><span class="c5 c4">return 1+1;</span><span><br></span><span class="c1">}</span><span class="c6">)</span><span class="c1">;</span></p><p class="c0"><span class="c3"></span></p><h2 class="c7 c19"><a name="h.oagh84djpbiu"></a><span class="c12">$ci_instance:</span></h2><p class="c7"><span class="c14">CodeIgniter ortam&#305;nda s&#305;k&ccedil;a kulland&#305;&#287;&#305;m&#305;z global fonksiyon olan di&#287;er ad&#305;yla</span><span class="c14 c20">&nbsp;super-object</span><span class="c14">&nbsp;olarak bilinen, </span><span class="c14 c4">run-time</span><span class="c14">&nbsp;an&#305;nda y&uuml;klenmi&#351; t&uuml;m class&rsquo;lara eri&#351;menizi sa&#287;lanan </span><span class="c9">get_instance</span><span class="c6 c14">();</span></p><p class="c7"><span class="c14">fonksiyonunun &ouml;rne&#287;idir.</span></p><p class="c0"><span class="c14"></span></p><h2 class="c7 c19"><a name="h.s4yj1fxvpduu"></a><span class="c12">$parm:</span></h2><p class="c7"><span class="c14">Event&rsquo;leri &ccedil;al&#305;&#351;t&#305;r&#305;rken g&ouml;ndermek isteyebilece&#287;imiz parametrelere i&#351;arat eder. &Ccedil;al&#305;&#351;ma an&#305;nda her hangi bir parametre g&ouml;nderilmez ise null olarak &ouml;n tan&#305;ml&#305; gelecektir.</span></p><p class="c0"><span class="c3 c14"></span></p><p class="c0"><span class="c3"></span></p><p class="c7"><span>Yukar&#305;da tan&#305;mlad&#305;&#287;&#305;m&#305;z event&rsquo;in anahtar&#305;n&#305; </span><span class="c4">event.manager</span><span>&nbsp;olarak belirledik.</span></p><p class="c0"><span></span></p><p class="c7"><span>Burada bir ka&ccedil; ayr&#305;nt&#305;ya de&#287;inelim.</span></p><p class="c7"><span>Tan&#305;mlamada closure fonksiyonunda gelen iki parametre g&ouml;r&uuml;yoruz, </span><span class="c11 c13">$ci_instance</span><span>&nbsp;ve </span><span class="c11 c13">$parm</span><span>&nbsp;.</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c7"><span>Daha sonra basit bir aritmetik i&#351;lem yapt&#305;k sonras&#305;n da i&#351;lem sonucunu </span><span class="c4">return </span><span>ettik.</span></p><p class="c0"><span></span></p><p class="c7"><span>Event&rsquo;larda sonu&ccedil;lar&#305; dilerseniz return yapabilir dilersenizde direk sonucu ekrana basabilirsiniz.</span></p><p class="c0"><span></span></p><p class="c7"><span>&#350;imdi ekledi&#287;imiz event&rsquo;i &ccedil;al&#305;&#351;t&#305;ral&#305;m.</span></p><p class="c0"><span></span></p><p class="c7"><span>Hatta senaryo gere&#287;i event&rsquo;i </span><span class="c4">defined.php</span><span>&nbsp;dosyas&#305;nda tan&#305;mlad&#305;&#287;&#305;m&#305;z&#305; var sayal&#305;m.</span></p><p class="c7"><span>&Ccedil;al&#305;&#351;t&#305;rd&#305;&#287;&#305;m&#305;z yer de </span><span class="c4">Urunler </span><span>controller&rsquo;&#305; olsun.</span></p><p class="c0"><span class="c3"></span></p><p class="c7"><span class="c11 c13">$result</span><span class="c3">&nbsp;</span><span class="c6">=</span><span class="c3">&nbsp;Events</span><span class="c1">::</span><span class="c3">fire</span><span class="c6">(</span><span class="c8">&#39;event.manager&#39;</span><span class="c6">)</span><span class="c1">;</span></p><p class="c0 c16"><span class="c3"></span></p><p class="c7"><span>Bu durumda </span><span class="c4">$result</span><span>&nbsp;de&#287;i&#351;keninin sonucu event&rsquo;ten d&ouml;nen sonu&ccedil; olacakt&#305;r.</span></p><p class="c0"><span></span></p><p class="c7"><span>Ba&#351;ka bir senaryo uygulayal&#305;m.</span></p><p class="c7"><span>Yeni bir event tan&#305;mlayal&#305;m ve bu event&rsquo;&#305; &ccedil;al&#305;&#351;t&#305;r&#305;rken (</span><span class="c4">fire</span><span>) parametreler g&ouml;nderelim.</span></p><p class="c7"><span><br></span><span class="c11">&nbsp;Events</span><span class="c1">::</span><span class="c11 c17">add</span><span class="c6">(</span><span class="c8">&#39;event.send.parm&#39;</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c5 c4">function</span><span class="c6">(</span><span class="c11 c13">$ci_instance</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c11 c13">$parm</span><span class="c6">)</span><span class="c1">{</span><span><br></span><span class="c11">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5 c4">var_dump(</span><span class="c11 c13">$parm</span><span class="c4 c5">)</span><span class="c1">;</span><span><br></span><span class="c11">&nbsp;</span><span class="c1">}</span><span class="c6">)</span><span class="c1">;</span></p><p class="c0"><span></span></p><p class="c7"><span>Tan&#305;mlamam&#305;z&#305; yapt&#305;k, &#351;imdi &ccedil;al&#305;&#351;t&#305;ral&#305;m ve &ccedil;al&#305;&#351;t&#305;r&#305;rkende de&#287;i&#351;ik parametreler g&ouml;nderelim.</span></p><p class="c0"><span></span></p><p class="c7"><span><br></span><span class="c11">&nbsp;</span><span class="c11 c13">$data</span><span class="c11">&nbsp;</span><span class="c6">=</span><span class="c11">&nbsp;</span><span class="c5 c4">array</span><span class="c6">(</span><span class="c8">&#39;php&#39;</span><span class="c11">&nbsp;</span><span class="c6">=&gt;</span><span class="c11">&nbsp;</span><span class="c8">&quot;It&#39;s perfect&quot;</span><span class="c6">)</span><span class="c1">;</span><span><br><br></span><span class="c11">&nbsp;Events</span><span class="c1">::</span><span class="c11">fire</span><span class="c6">(</span><span class="c8">&#39;event.manager&#39;</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c11 c13">$data);</span></p><p class="c0"><span class="c11 c13"></span></p><p class="c7"><span>Event &ccedil;al&#305;&#351;t&#305;&#287;&#305;nda g&ouml;nderdei&#287;imiz parametreyi </span><span class="c4">var_dump</span><span>&nbsp;ile ekrana yan&#305;d&#305;&#287;&#305;n&#305; g&ouml;receksiniz.</span></p><p class="c7"><span>Bu parametreler string ve object tipinde de olabilir.</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c7 c21 title"><a name="h.kmeazrt8pwz3"></a><span>D&#305;&#351;ardan de&#287;i&#351;kenleri kullanmak</span></p><p class="c7"><span>Son olarak bir event&rsquo;e fire komutunu verirken g&ouml;nderdi&#287;imiz para metre d&#305;&#351;&#305;nda d&#305;&#351;ar&#305;dan do&#287;rudan de&#287;i&#351;ken ekleyebiliriz.</span></p><p class="c0"><span></span></p><p class="c7"><span>Bu PHP 5.3&rsquo;ten sonra hayat&#305;m&#305;za giren ve bi &ccedil;ok durumda i&#351;imize yarayan anonymous functions&rsquo;larla m&uuml;mk&uuml;n oluyor.</span></p><p class="c0"><span></span></p><p class="c7"><span>Event&rsquo;&icirc;mizi tan&#305;mlayal&#305;m ve de&#287;i&#351;kenleri nas&#305;l kullanaca&#287;&#305;m&#305;z&#305; g&ouml;relim.</span></p><p class="c7"><span><br></span><span class="c11 c13">$parm1</span><span class="c11">&nbsp;</span><span class="c6">=</span><span class="c11">&nbsp;</span><span class="c8">&#39;php&#39;</span><span class="c1">;</span><span><br></span><span class="c11 c13">$parm2</span><span class="c11">&nbsp;</span><span class="c6">=</span><span class="c11">&nbsp;</span><span class="c8">&#39;mvc&#39;</span><span class="c1">;</span><span><br><br></span><span class="c11">Events</span><span class="c1">::</span><span class="c11 c17">add</span><span class="c6">(</span><span class="c8">&#39;event.manager&#39;</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c5 c4">function</span><span class="c6">(</span><span class="c11 c13">$ci_instance</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c11 c13">$parm</span><span class="c6">)</span><span class="c11">&nbsp;</span><span class="c5 c4">use</span><span class="c6">(</span><span class="c11 c13">$parm1</span><span class="c6">,</span><span class="c11">&nbsp;</span><span class="c11 c13">$parm2</span><span class="c6">)</span><span class="c1">{</span><span><br></span><span class="c11">&nbsp; &nbsp; &nbsp; </span><span class="c5 c4">echo</span><span class="c11">&nbsp;</span><span class="c11 c13">$parm1</span><span class="c1">;</span></p><p class="c7"><span>&nbsp; &nbsp; &nbsp; </span><span class="c5 c4">echo</span><span class="c11">&nbsp;</span><span class="c11 c13">&lsquo;&lt;br /&gt;&rsquo;</span><span class="c1">;</span></p><p class="c7"><span>&nbsp; &nbsp; &nbsp; </span><span class="c5 c4">echo</span><span class="c11">&nbsp;</span><span class="c11 c13">$parm2</span><span class="c1">;</span><span><br></span><span class="c1">}</span><span class="c6">)</span><span class="c1">;</span></p><p class="c0"><span class="c11"></span></p><p class="c7"><span>Yukarda &ouml;nceki tan&#305;mlad&#305;&#287;&#305;m&#305;z event&rsquo;lerden farkl&#305; olarak closure fonksiyonunda use &ouml;zelli&#287;ini g&ouml;r&uuml;yorsunuz. </span></p><p class="c0"><span></span></p><p class="c7"><span>Use PHP 5.3 ten sonra yayg&#305;n kullan&#305;lan bir &ouml;zellik olmas&#305; sebebiyle bende Events Manager k&uuml;t&uuml;hanesinde kullanarak anlatmak istedim.</span></p><p class="c0"><span></span></p><p class="c7"><span>K&uuml;t&uuml;hane hakk&#305;nda d&uuml;&#351;&uuml;ncelerinizi, fark etti&#287;iniz eksiklikleri proje alt&#305;nda konu a&ccedil;arak birlikte &ccedil;&ouml;z&uuml;me ula&#351;t&#305;rabiliriz.</span></p><p class="c0"><span></span></p><p class="c7"><span>&#304;yi kodlamalar.</span></p><p class="c0 c24"><span></span></p><p class="c0"><span></span></p></body></html>